<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修python模块学习' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>python模块学习</center></div><div class='banquan'>原文出处:本文由博客园博主梦想一步登天提供。<br/>
原文连接:https://www.cnblogs.com/june-L/p/11623611.html</div><br>
    <p><span style="font-size: 18px;">=========================time模块===============================</span><br /><span style="font-size: 18px;">作用：打印日期，做时间转换。</span></p>
<p><span style="font-size: 18px;">import time</span><br /><span style="font-size: 18px;">import datetime</span></p>
<p><span style="font-size: 18px;">#示例一：sleep()</span><br /><span style="font-size: 18px;">print("start to sleep.....")</span><br /><span style="font-size: 18px;">time.sleep(5)   #让程序停止5秒</span><br /><span style="font-size: 18px;">print("wake up...")</span></p>
<p><span style="font-size: 18px;">#示例二：时间戳</span><br /><span style="font-size: 18px;">print(time.time())  #返回当前系统时间戳</span></p>
<p><span style="font-size: 18px;">#示例三：输出当前系统时间</span><br /><span style="font-size: 18px;">print(time.ctime())  #输出当前系统时间</span></p>
<p><span style="font-size: 18px;">#示例四：将时间戳转为字符串格式</span><br /><span style="font-size: 18px;">print(time.ctime(time.time()-86400))  #将时间戳转为字符串格式</span></p>
<p><span style="font-size: 18px;">#示例五：将时间戳转换成struct_time格式</span><br /><span style="font-size: 18px;">print(time.gmtime(time.time()-86400))</span></p>
<p><span style="font-size: 18px;">#示例六：将时间戳转换成struct_time格式，但返回本地时间</span><br /><span style="font-size: 18px;">print(time.localtime(time.time()-86400))</span></p>
<p><span style="font-size: 18px;">#示例七：与time.localtime()功能相反，将struct_time格式转换成时间戳格式</span><br /><span style="font-size: 18px;">print(time.mktime(time.localtime()))</span></p>
<p><span style="font-size: 18px;">#示例八：将struct_time格式转换成指定的字符串格式</span><br /><span style="font-size: 18px;">print(time.srtftime("%Y-%m-%d %H:%M:%S", time.gmtime()))</span></p>
<p><span style="font-size: 18px;">#示例九：将字符串格式转换成struct_time格式</span><br /><span style="font-size: 18px;">print(time.strptime("2019-10-01", "%Y-%m-%d"))</span></p>
<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;">========================datetime模块===========================</span><br /><span style="font-size: 18px;">#示例一：输出今天的日期</span><br /><span style="font-size: 18px;">datetime.date.today()</span></p>
<p><span style="font-size: 18px;">#示例二：将时间戳转成日期格式 </span><br /><span style="font-size: 18px;">datetime.date.fromtimestamp(time.time()-86400)</span></p>
<p><span style="font-size: 18px;">#示例三：</span><br /><span style="font-size: 18px;">current_time = datetime.datetime.now()</span><br /><span style="font-size: 18px;">print(current_time)   #输出%Y-%m-%d %H:%M:%S格式，输出结果：2019-10-04 16:35:44.065723</span><br /><span style="font-size: 18px;">print(current_time.timetuple())  #返回struct_time格式</span><br /><span style="font-size: 18px;">print(current_time.replace(2019,10,04))  #输出%Y-%m-%d %H:%M:%S格式，返回当前时间，但指定的值将被替换。</span></p>
<p><span style="font-size: 18px;">#示例四：将字符串转换成日期格式</span><br /><span style="font-size: 18px;">str_to_date = datetime.datetime.strptime("04/10/19 16:25", "%d/%m/%y %H:%M")</span></p>
<p><span style="font-size: 18px;">#示例五：比现在加10天</span><br /><span style="font-size: 18px;">new_date = datetime.datetime.now() + datetime.timedelta(days = 10)</span></p>
<p><span style="font-size: 18px;">#示例六：比现在减10天</span><br /><span style="font-size: 18px;">new_date = datetime.datetime.now() + datetime.timedelta(days = -10)</span></p>
<p><span style="font-size: 18px;">#示例七：比现在减10小时</span><br /><span style="font-size: 18px;">new_date = datetime.datetime.now() + datetime.timedelta(hours = 10)</span></p>
<p><span style="font-size: 18px;">#示例八：比现在加120秒</span><br /><span style="font-size: 18px;">new _date = datetime.datetime.now() + datetime.timedelta(seconds = 120)</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">=========================sys模块==============================</span><br /><span style="font-size: 18px;">import os</span><br /><span style="font-size: 18px;">import sys</span></p>
<p><span style="font-size: 18px;">#示例一：命令行参数list，第一个元素是程序本身路径</span><br /><span style="font-size: 18px;">sys.argv</span></p>
<p><span style="font-size: 18px;">#示例二：退出程序，正常退出时exit(0)</span><br /><span style="font-size: 18px;">sys.exit(n)</span></p>
<p><span style="font-size: 18px;">#示例三：获取int最大值。</span><br /><span style="font-size: 18px;">sys.maxint</span></p>
<p><span style="font-size: 18px;">#示例五：返回模块的搜索路径，初始化使用PYTHONPATH环境变量的值</span><br /><span style="font-size: 18px;">sys.path</span></p>
<p><span style="font-size: 18px;">#示例六：返回操作系统平台名称</span><br /><span style="font-size: 18px;">sys.platform</span></p>
<p><span style="font-size: 18px;">#示例七：向屏幕上显示信息</span><br /><span style="font-size: 18px;">sys.stdout.write('hello')</span></p>
<p><span style="font-size: 18px;">#示例八：读取屏幕的输入</span><br /><span style="font-size: 18px;">val = sys.stdin.readline()[:-1]</span></p>
<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;">练习一：读写用户的输入，根据用户输入创建一个相应的目录。</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('276be9a4-2f67-4eb6-9dc8-8930de130119')"><span style="font-size: 18px;"><img id="code_img_closed_276be9a4-2f67-4eb6-9dc8-8930de130119" class="code_img_closed" src="./images/python模块学习0.png" alt="" /><img id="code_img_opened_276be9a4-2f67-4eb6-9dc8-8930de130119" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('276be9a4-2f67-4eb6-9dc8-8930de130119',event)" src="./images/python模块学习1.png" alt="" /></span>
<div id="cnblogs_code_open_276be9a4-2f67-4eb6-9dc8-8930de130119" class="cnblogs_code_hide">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;">1</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> sys, os
</span><span style="color: #008080;">2</span> dirname = input(<span style="color: #800000;">"</span><span style="color: #800000;">请输入你的目录名称： </span><span style="color: #800000;">"</span><span style="color: #000000;">)
</span><span style="color: #008080;">3</span> ret = os.mkdir(dirname)</span></pre>
</div>
<span class="cnblogs_code_collapse" style="font-size: 18px;">View Code</span></div>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">练习二：模拟进度条的显示</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('499238a5-14e2-43ca-a2d6-589ecba988a8')"><span style="font-size: 18px;"><img id="code_img_closed_499238a5-14e2-43ca-a2d6-589ecba988a8" class="code_img_closed" src="./images/python模块学习0.png" alt="" /><img id="code_img_opened_499238a5-14e2-43ca-a2d6-589ecba988a8" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('499238a5-14e2-43ca-a2d6-589ecba988a8',event)" src="./images/python模块学习1.png" alt="" /></span>
<div id="cnblogs_code_open_499238a5-14e2-43ca-a2d6-589ecba988a8" class="cnblogs_code_hide">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;">1</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> sys, time
</span><span style="color: #008080;">2</span> 
<span style="color: #008080;">3</span> <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> range(31<span style="color: #000000;">):
</span><span style="color: #008080;">4</span>     sys.stdout.write(<span style="color: #800000;">'</span><span style="color: #800000;">\r</span><span style="color: #800000;">'</span>) <span style="color: #008000;">#</span><span style="color: #008000;">每一次清空原行</span>
<span style="color: #008080;">5</span>     sys.stdout.write(<span style="color: #800000;">"</span><span style="color: #800000;">%s%% | %s</span><span style="color: #800000;">"</span> % (int(i/30*100), int(i/30*100) * <span style="color: #800000;">'</span><span style="color: #800000;">#</span><span style="color: #800000;">'</span><span style="color: #000000;">))
</span><span style="color: #008080;">6</span>     sys.stdout.flush() <span style="color: #008000;">#</span><span style="color: #008000;">强制刷新到屏幕</span>
<span style="color: #008080;">7</span>     time.sleep(0.2) <span style="color: #008000;">#</span><span style="color: #008000;">控制输出的速度</span></span></pre>
</div>
<span class="cnblogs_code_collapse" style="font-size: 18px;">View Code</span></div>
<p><span style="font-size: 18px;">进度条显示的结果：</span></p>
<p><span style="font-size: 18px;"><img src="./images/python模块学习4.png" alt="" /></span></p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">===========================os模块==============================</span><br /><span style="font-size: 18px;">示例七：获取当前工作目录，即当前python脚本工作的目录路径</span><br /><span style="font-size: 18px;">os.getcwd()</span></p>
<p><span style="font-size: 18px;">#示例八：改变当前脚本工作目录，相当于shell下cd</span><br /><span style="font-size: 18px;">os.chdir()</span></p>
<p><span style="font-size: 18px;">#示例九：返回当前目录（'.'）</span><br /><span style="font-size: 18px;">os.curdir()</span></p>
<p><span style="font-size: 18px;">#示例十：获取当前目录的父目录字符串名('..')</span><br /><span style="font-size: 18px;">os.pardir()</span></p>
<p><span style="font-size: 18px;">#示例十一：可生成多层递归目录</span><br /><span style="font-size: 18px;">os.makedirs('dirname1/dirname2')</span></p>
<p><span style="font-size: 18px;">#示例十二：若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推</span><br /><span style="font-size: 18px;">os.removedirs('dirname1')</span></p>
<p><span style="font-size: 18px;">#示例十三：生成单级目录，相当于shell下mkdir</span><br /><span style="font-size: 18px;">os.mkdir('dirname1')</span></p>
<p><span style="font-size: 18px;">#示例十四：删除单级目录，若目录不为空则无法删除，报错；相当于shell下rmdir</span><br /><span style="font-size: 18px;">os.rmdir('dirname')</span></p>
<p><span style="font-size: 18px;">#示例十五：列出指定目录下的所有文件和子目录，包含隐藏文件，并以列表的方式打印</span><br /><span style="font-size: 18px;">os.listdir('dirname')</span></p>
<p><span style="font-size: 18px;">#示例十六：删除一个文件</span><br /><span style="font-size: 18px;">os.remove()</span></p>
<p><span style="font-size: 18px;">#示例十七：重命名文件或目录</span><br /><span style="font-size: 18px;">os.rename("oldname", "newname")</span></p>
<p><span style="font-size: 18px;">#示例十八：获取文件或目录信息</span><br /><span style="font-size: 18px;">os.stat('path/filename')</span></p>
<p><span style="font-size: 18px;">#示例十九：输出操作系统特定的路径分隔符，windows下为"\\"，Linux下为"/"</span><br /><span style="font-size: 18px;">os.sep</span></p>
<p><span style="font-size: 18px;">#示例二十：输出当前平台使用的行终止符，windows下为"\t\n"，Linux下为"\n"</span><br /><span style="font-size: 18px;">os.linesep</span></p>
<p><span style="font-size: 18px;">#示例二十一：输出用于分割文件路径的字符串</span><br /><span style="font-size: 18px;">os.pathsep</span></p>
<p><span style="font-size: 18px;">#示例二十二：输出字符串指示当前使用平台，windows下为"nt"，Linux下为"posix"</span><br /><span style="font-size: 18px;">os.name</span></p>
<p><span style="font-size: 18px;">#示例二十三：运行shell命令，直接显示</span><br /><span style="font-size: 18px;">os.system("bash command")</span></p>
<p><span style="font-size: 18px;">#示例二十四：获取系统环境变量</span><br /><span style="font-size: 18px;">os.environ</span></p>
<p><span style="font-size: 18px;">#示例二十五：返回path规范化的绝对路径</span><br /><span style="font-size: 18px;">os.path.abspath(path)</span></p>
<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;">============================pickle模块--序列化===============================</span></p>
<p><span style="font-size: 18px;">pickle提供了一个简单的持久化功能。可以将对象以文件的形式存放在磁盘上。</span></p>
<p><span style="font-size: 18px;">pickle模块只能在Python中使用，python中几乎所有的数据类型（列表，字典，集合，类等）都可以用pickle来序列化，</span></p>
<p><span style="font-size: 18px;">pickle序列化后的数据，可读性差，人一般无法识别。</span></p>
<p><span style="font-size: 18px;">pickle.dump(obj, file[, protocol])</span><br /><span style="font-size: 18px;">　　序列化对象，并将结果数据流写入到文件对象中。参数protocol是序列化模式，默认值为0，表示以文本的形式序列化。protocol的值还可以是1或2，表示以二进制的形式序列化。</span></p>
<p><span style="font-size: 18px;">pickle.dumps(obj)：以字节对象形式返回封装的对象，不需要写入文件中</span></p>
<p><span style="font-size: 18px;">pickle.load(file)</span><br /><span style="font-size: 18px;">　　反序列化对象。将文件中的数据解析为一个Python对象。</span></p>
<p><span style="font-size: 18px;">其中要注意的是，在load(file)的时候，要让python能够找到类的定义，否则会报错。</span></p>
<p><span style="font-size: 18px;">pickle.loads(bytes_object): 从字节对象中读取被封装的对象，并返回。</span></p>
<p><br /><span style="font-size: 18px;"> pickle模块可能出现三种异常：</span></p>
<p><span style="font-size: 18px;">    1. PickleError：封装和拆封时出现的异常类，继承自Exception</span></p>
<p><span style="font-size: 18px;">    2. PicklingError: 遇到不可封装的对象时出现的异常，继承自PickleError</span></p>
<p><span style="font-size: 18px;">    3. UnPicklingError: 拆封对象过程中出现的异常，继承自PickleError</span><br />	<br /><span style="font-size: 18px;">示例一：dumps功能</span><br /><span style="font-size: 18px;">import pickle</span><br /><span style="font-size: 18px;">data = ['aa', 'bb', 'cc']  </span><br /><span style="font-size: 18px;"># dumps 将数据通过特殊的形式转换为只有python语言认识的字符串</span><br /><span style="font-size: 18px;">p_str = pickle.dumps(data)</span><br /><span style="font-size: 18px;">print(p_str)</span><br /><span style="font-size: 18px;">#结果为：            </span><br /><span style="font-size: 18px;">b'\x80\x03]q\x00(X\x02\x00\x00\x00aaq\x01X\x02\x00\x00\x00bbq\x02X\x02\x00\x00\x00ccq\x03e.	</span></p>
<p><span style="font-size: 18px;">#示例二：loads功能</span></p>
<p><span style="font-size: 18px;"># loads  将pickle数据转换为python的数据结构</span><br /><span style="font-size: 18px;">mes = pickle.loads(p_str)</span><br /><span style="font-size: 18px;">print(mes)</span><br /><span style="font-size: 18px;">['aa', 'bb', 'cc']</span></p>
<p><span style="font-size: 18px;">示例三： dump功能</span><br /><span style="font-size: 18px;"># dump 将数据通过特殊的形式转换为只有python语言认识的字符串，并写入文件</span><br /><span style="font-size: 18px;">with open('D:/tmp.txt', 'w') as f:</span><br /><span style="font-size: 18px;">   pickle.dump(data, f)</span><br />   <br /><span style="font-size: 18px;">示例四： load功能</span><br /><span style="font-size: 18px;"># load 从数据文件中读取数据，并转换为python的数据结构</span><br /><span style="font-size: 18px;">with open('D:/tmp.txt', 'r') as f:</span><br /><span style="font-size: 18px;">	data = pickle.load(f)</span></p>
<p><span style="font-size: 18px;">============================json模块--反序列化==================================</span></p>
<p><span style="font-size: 18px;">Python的json模块，可以将字符串形式的json数据转化为字典，也可以将Python中的字典数据转化为字符串形式的json数据。</span></p>
<p><span style="font-size: 18px;">josn.loads()用于将字典、列表、元组形式的字符串，装换成相应的字典、列表、元组。</span></p>
<p><span style="font-size: 18px;">示例：</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('e83dd72d-cd2e-47dd-9c2d-98ea7ba76325')"><img id="code_img_closed_e83dd72d-cd2e-47dd-9c2d-98ea7ba76325" class="code_img_closed" src="./images/python模块学习0.png" alt="" /><img id="code_img_opened_e83dd72d-cd2e-47dd-9c2d-98ea7ba76325" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e83dd72d-cd2e-47dd-9c2d-98ea7ba76325',event)" src="./images/python模块学习1.png" alt="" />
<div id="cnblogs_code_open_e83dd72d-cd2e-47dd-9c2d-98ea7ba76325" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;">1</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> josn
</span><span style="color: #008080;">2</span>     
<span style="color: #008080;">3</span> str = <span style="color: #800000;">'</span><span style="color: #800000;">{"desc": "invilad-citykey", "status": 1002}</span><span style="color: #800000;">'</span>
<span style="color: #008080;">4</span> result =<span style="color: #000000;"> josn.loads(str)
</span><span style="color: #008080;">5</span> <span style="color: #0000ff;">print</span>(result)</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">1、json字符串转为python基本数据类型</span></p>
<p><span style="font-size: 18px;">json.load / json.loads</span></p>
<p><span style="font-size: 18px;">两个方法功能类似，可选参数也相同，最大的区别在于，json.load方法接受的输入，即第一个参数，是包含json数据的文件对象，如open方法的返回对象，</span></p>
<p><span style="font-size: 18px;">json.loads接受的输入是json字符串，而非文件对象。从输入类型的区别也可以看出两者的使用场合。</span></p>
<p><span style="font-size: 18px;">可选参数包括是否需要转换整型、浮点型等数值的参数，还有一些复杂的功能，暂时没有用到，以后有机会再了解。</span></p>
<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;">2、python基本数据类型转换为字符串</span></p>
<p><span style="font-size: 18px;">json.dump / json.dumps</span></p>
<p><span style="font-size: 18px;">对应于load和loads，dump的第一个参数是对象字典，第二个参数是文件对象，可以直接将转换后的json数据写入文件，dumps的第一个参数是对象字典，其余都是可选参数。dump和dumps的可选参数相同</span></p>
<p><span style="font-size: 18px;">===================python模块知识拾遗===============================</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">__doc__ : py文件的注释</span></p>
<p><span style="font-size: 18px;"><em id="__mceDel">__file__ :本身自己文件的路径<br />__package__ :导入的其他文件:指定所在的包,用"."分隔; 当前文件是None<br />__cached__ : 缓存<br />__name__ :如果是主文件, __name__ == "__main__",否则,等于模块名</em></span></p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">注意:</span><br /><span style="font-size: 18px;">1、主文件</span><br /><span style="font-size: 18px;">	　　调用主函数前，必须加if __name__ == "__main__":</span><br /><span style="font-size: 18px;">2、__file__</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">　　将bin文件夹下的路径添加到os.path,使用当前的主文件能直接使用import t3导入t3.py文件</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('8416db86-5df4-4248-90e8-eb71792efc79')"><img id="code_img_closed_8416db86-5df4-4248-90e8-eb71792efc79" class="code_img_closed" src="./images/python模块学习0.png" alt="" /><img id="code_img_opened_8416db86-5df4-4248-90e8-eb71792efc79" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('8416db86-5df4-4248-90e8-eb71792efc79',event)" src="./images/python模块学习1.png" alt="" />
<div id="cnblogs_code_open_8416db86-5df4-4248-90e8-eb71792efc79" class="cnblogs_code_hide">
<pre><code><span style="color: #008080;">1</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> os, sys
</span><span style="color: #008080;">2</span> <span style="color: #0000ff;">print</span>(<span style="color: #800080;">__file__</span>) <span style="color: #008000;">#</span><span style="color: #008000;">获取当前文件的所在路径</span>
<span style="color: #008080;">3</span> p1 =os.path.dirname(<span style="color: #800080;">__file__</span>) <span style="color: #008000;">#</span><span style="color: #008000;">获取文件的上级目录路径</span>
<span style="color: #008080;">4</span> p2 = <span style="color: #800000;">"</span><span style="color: #800000;">bin</span><span style="color: #800000;">"</span>
<span style="color: #008080;">5</span> new_path =<span style="color: #000000;"> os.path.join(p1, p2)
</span><span style="color: #008080;">6</span> <span style="color: #0000ff;">print</span><span style="color: #000000;">(new_path)
</span><span style="color: #008080;">7</span> sys.path.append(new_path)</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">&nbsp;</span></p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>