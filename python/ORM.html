<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修ORM' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>ORM</center></div><div class='banquan'>原文出处:本文由博客园博主我是渣渣聪提供。<br/>
原文连接:https://www.cnblogs.com/missdx/p/11186930.html</div><br>
    <h1>简单介绍ORM:</h1>
<p>　　对象关系映射（英语：(Object Relational Mapping，简称ORM，或O/RM，或O/R mapping），是一种程序技术，用于实现面向对象编程语言里不同类型系统的数据之间的转换<span class="sup--normal" data-sup="1" data-ctrmap=":1,">&nbsp;[1]。从效果上说，它其实是创建了一个可在编程语言里使用的--&ldquo;虚拟对象数据库&rdquo;。</span></p>
<h1><span class="sup--normal" data-sup="1" data-ctrmap=":1,">简单分析ORM的优缺点：</span></h1>
<p><span class="sup--normal" data-sup="1" data-ctrmap=":1,">　　优点：1.简单，不用自己写SQL语句</span></p>
<p><span class="sup--normal" data-sup="1" data-ctrmap=":1,">　　　　　2.开发效率高</span></p>
<p><span class="sup--normal" data-sup="1" data-ctrmap=":1,">　　缺点：1.你需要记住ORM的特殊语法</span></p>
<p><span class="sup--normal" data-sup="1" data-ctrmap=":1,">　　　　&nbsp; &nbsp; 2.因为不是专业的SQL语句，相对于某些大佬的SQL语句，执行效率肯定有差距</span></p>
<h1><span class="sup--normal" data-sup="1" data-ctrmap=":1,">ORM中的对应关系：</span></h1>
<p><span class="sup--normal" data-sup="1" data-ctrmap=":1,">　　类&mdash;&mdash;数据表</span></p>
<p><span class="sup--normal" data-sup="1" data-ctrmap=":1,">　　对象&mdash;&mdash;数据行</span></p>
<p><span class="sup--normal" data-sup="1" data-ctrmap=":1,">　　属性&mdash;&mdash;字段</span></p>
<h1><span class="sup--normal" data-sup="1" data-ctrmap=":1,">ORM能做的事：</span></h1>
<p><span class="sup--normal" data-sup="1" data-ctrmap=":1,">　　1.操作数据表&mdash;&mdash;&gt;创建表、删除表、修改表、操作models.py里面的类</span></p>
<p><span class="sup--normal" data-sup="1" data-ctrmap=":1,">　　2.操作数据行&mdash;&mdash;&gt;数据的增删改查</span></p>
<p><span class="sup--normal" data-sup="1" data-ctrmap=":1,">　　但是ORM不能创建数据库，需要事先自己手动创建数据库。</span></p>
<h1><span class="sup--normal" data-sup="1" data-ctrmap=":1,">使用Django的ORM详细步骤：</span></h1>
<p><span class="sup--normal" data-sup="1" data-ctrmap=":1,">　　1.自己手动创建数据库</span></p>
<p><span class="sup--normal" data-sup="1" data-ctrmap=":1,">　　　　create database 数据库名;</span></p>
<p><span class="sup--normal" data-sup="1" data-ctrmap=":1,">　　2.在Django项目中的settings.py里面设置连接数据库的相关配置（告诉Django连接哪一个数据库）</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> <span style="color: #008000;">#</span><span style="color: #008000;"> 与数据库相关的配置</span>
<span style="color: #008080;"> 2</span> DATABASES =<span style="color: #000000;"> {
</span><span style="color: #008080;"> 3</span>     <span style="color: #800000;">'</span><span style="color: #800000;">default</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
</span><span style="color: #008080;"> 4</span>         <span style="color: #008000;">#</span><span style="color: #008000;"> 连接数据库的类型</span>
<span style="color: #008080;"> 5</span>         <span style="color: #800000;">'</span><span style="color: #800000;">ENGINE</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">django.db.backends.mysql</span><span style="color: #800000;">'</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 6</span>         <span style="color: #008000;">#</span><span style="color: #008000;"> 连接数据库的地址</span>
<span style="color: #008080;"> 7</span>         <span style="color: #800000;">'</span><span style="color: #800000;">HOST</span><span style="color: #800000;">'</span>:<span style="color: #800000;">'</span><span style="color: #800000;">127.0.0.1</span><span style="color: #800000;">'</span><span style="color: #000000;">,
</span><span style="color: #008080;"> 8</span>         <span style="color: #008000;">#</span><span style="color: #008000;"> 连接数据库的端口</span>
<span style="color: #008080;"> 9</span>         <span style="color: #800000;">'</span><span style="color: #800000;">PORT</span><span style="color: #800000;">'</span>:3306<span style="color: #000000;">,
</span><span style="color: #008080;">10</span>         <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库名称</span>
<span style="color: #008080;">11</span>         <span style="color: #800000;">'</span><span style="color: #800000;">NAME</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">day61</span><span style="color: #800000;">'</span><span style="color: #000000;">,
</span><span style="color: #008080;">12</span>         <span style="color: #008000;">#</span><span style="color: #008000;"> 用户</span>
<span style="color: #008080;">13</span>         <span style="color: #800000;">'</span><span style="color: #800000;">USER</span><span style="color: #800000;">'</span>:<span style="color: #800000;">'</span><span style="color: #800000;">root</span><span style="color: #800000;">'</span><span style="color: #000000;">,
</span><span style="color: #008080;">14</span>         <span style="color: #008000;">#</span><span style="color: #008000;"> 密码</span>
<span style="color: #008080;">15</span>         <span style="color: #800000;">'</span><span style="color: #800000;">PASSWORD</span><span style="color: #800000;">'</span>:<span style="color: #800000;">'</span><span style="color: #800000;">000000</span><span style="color: #800000;">'</span>
<span style="color: #008080;">16</span>     }</pre>
</div>
<p>　　3.在__init__.py里面告诉Djiango用pymysql代替默认的MySQLDB连接MySQL数据库　</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> pymysql
</span><span style="color: #008080;">2</span> <span style="color: #008000;">#</span><span style="color: #008000;"> 告诉django用pymysql来代替默认的mysqldb</span>
<span style="color: #008080;">3</span> pymysql.install_as_MySQLdb()</pre>
</div>
<p>　　4.在app下面的models.py文件夹中定义一个类，这个类必须继承models.Model.</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;">1</span> <span style="color: #0000ff;">from</span> django.db <span style="color: #0000ff;">import</span><span style="color: #000000;"> models
</span><span style="color: #008080;">2</span> 
<span style="color: #008080;">3</span> <span style="color: #008000;">#</span><span style="color: #008000;"> Create your models here.</span>
<span style="color: #008080;">4</span> <span style="color: #008000;">#</span><span style="color: #008000;"> ORM相关的只能写在这个文件里，写在其他文件的话django找不到</span>
<span style="color: #008080;">5</span> 
<span style="color: #008080;">6</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> UserInfo(models.Model):
</span><span style="color: #008080;">7</span>     id = models.AutoField(primary_key=True) <span style="color: #008000;">#</span><span style="color: #008000;"> 创建一个自增的主键字段</span>
<span style="color: #008080;">8</span>     name = models.CharField(null=False,max_length=20) <span style="color: #008000;">#</span><span style="color: #008000;"> 创建一个varchar(20)类型的不能为空的字段</span></pre>
</div>
<p>　　5.在终端执行两个命令</p>
<p>　　　　注：每次在models.py对ORM语句修改后，都要执行以下这两个语句。</p>
<p>　　　　（1）python manage.py makemigrations&mdash;&mdash;&mdash;&mdash;这句相当于每次改动后，将改动保存到项目文件夹下的migrations中</p>
<p>　　　　这里可能会遇到一个错误，解决办法请参见：　　　　<a href="https://blog.csdn.net/weixin_33127753/article/details/89100552">https://blog.csdn.net/weixin_33127753/article/details/89100552</a></p>
<p>　　　　（2）python manage.py migrate&mdash;&mdash;&mdash;&mdash;这句相当于把改动翻译成SQL语句，然后去数据库中执行</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>