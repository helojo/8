<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修1.2模板templates' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>1.2模板templates</center></div><div class='banquan'>原文出处:本文由博客园博主Talos仇嘉豪提供。<br/>
原文连接:https://www.cnblogs.com/talosant/p/11354516.html</div><br>
    <h1 id="模板使用"><span style="color: #3366ff;">一.模板使用</span></h1>
<h2 id="1-配置模板目录"><span style="color: #00ff00;">1. 配置模板目录</span></h2>
<p><span style="font-size: 18px;">如果命令行创建的项目，需要手动配置模板文件目录，如果是Pycharm创建的项目，则无需配置</span></p>
<ul>
<li><span style="font-size: 18px;">在项目根目录下创建模板目录，比如叫&nbsp;<code>templates</code>，后续开发模板文件会放在此目录下</span></li>
<li>
<p><span style="font-size: 18px;">在项目的配置文件<code>settings.py</code>文件中，进行模板目录的配置，如下：</span></p>
</li>
</ul>
<p><img src="./images/1.2模板templates0.png" alt="" /></p>
<h1>&nbsp;</h1>
<h1><span style="color: #00ff00;"><strong><span style="font-size: 18px;">2. 定义模板文件</span></strong></span></h1>
<p><span style="font-size: 18px;"><strong>　</strong>在<code>templates</code>目录中新建一个模板文件，如<code>show.html</code></span></p>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> &lt;!DOCTYPE html&gt;
<span style="color: #008080;"> 2</span> &lt;html lang=<span style="color: #800000;">"</span><span style="color: #800000;">en</span><span style="color: #800000;">"</span>&gt;
<span style="color: #008080;"> 3</span> &lt;head&gt;
<span style="color: #008080;"> 4</span>     &lt;meta charset=<span style="color: #800000;">"</span><span style="color: #800000;">UTF-8</span><span style="color: #800000;">"</span>&gt;
<span style="color: #008080;"> 5</span>     &lt;title&gt;Title&lt;/title&gt;
<span style="color: #008080;"> 6</span> &lt;/head&gt;
<span style="color: #008080;"> 7</span> &lt;body&gt;
<span style="color: #008080;"> 8</span>     &lt;!-- 显示模板变量 --&gt;
<span style="color: #008080;"> 9</span>     &lt;h1&gt;{我的名字是:{ name }}&lt;/h1&gt;
<span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span> &lt;/body&gt;
<span style="color: #008080;">12</span> &lt;/html&gt;</span></pre>
</div>
<p>&nbsp;</p>
<h2 id="3-模板渲染"><span style="color: #00ff00;">3. 模板渲染</span></h2>
<p><span style="color: #3366ff; font-size: 18px;">方法一:通过render函数</span></p>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;">1</span> <span style="color: #0000ff;">from</span> django.shortcuts <span style="color: #0000ff;">import</span><span style="color: #000000;"> render
</span><span style="color: #008080;">2</span> 
<span style="color: #008080;">3</span> <span style="color: #0000ff;">def</span><span style="color: #000000;"> index(request):
</span><span style="color: #008080;">4</span>     data_dict = {<span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">django</span><span style="color: #800000;">'</span><span style="color: #000000;"> }
</span><span style="color: #008080;">5</span>     <span style="color: #008000;">#</span><span style="color: #008000;"> 参数1：请求对象</span>
<span style="color: #008080;">6</span>     <span style="color: #008000;">#</span><span style="color: #008000;"> 参数2：模块路径</span>
<span style="color: #008080;">7</span>     <span style="color: #008000;">#</span><span style="color: #008000;"> 参数3：字典数据</span>
<span style="color: #008080;">8</span>     <span style="color: #0000ff;">return</span> render(request, <span style="color: #800000;">'</span><span style="color: #800000;">index.html</span><span style="color: #800000;">'</span>, data_dict)</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #3366ff; font-size: 18px;">　　</span></p>
<p><span style="color: #3366ff; font-size: 18px;">方法二:通过Template对象的render方法</span></p>
<div class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">from</span> django.template <span style="color: #0000ff;">import</span><span style="color: #000000;"> loader
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">def</span><span style="color: #000000;"> index(request):
</span><span style="color: #008080;"> 4</span>     <span style="color: #008000;">#</span><span style="color: #008000;"> 获取模板对象</span>
<span style="color: #008080;"> 5</span>     template = loader.get_template(<span style="color: #800000;">'</span><span style="color: #800000;">index.html</span><span style="color: #800000;">'</span>)  <span style="color: #008000;">#</span><span style="color: #008000;"> type: Template</span>
<span style="color: #008080;"> 6</span>     <span style="color: #008000;">#</span><span style="color: #008000;"> 渲染得到字符串</span>
<span style="color: #008080;"> 7</span>     data_dict = {<span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">django</span><span style="color: #800000;">'</span><span style="color: #000000;"> }
</span><span style="color: #008080;"> 8</span>     html_str =<span style="color: #000000;"> template.render(data_dict)
</span><span style="color: #008080;"> 9</span>     <span style="color: #008000;">#</span><span style="color: #008000;"> 响应请求</span>
<span style="color: #008080;">10</span>     <span style="color: #0000ff;">return</span> HttpResponse(html_str)</span></pre>
</div>
<p>&nbsp;</p>
<h1><span style="color: #3366ff;">二.模板的语法</span></h1>
<ul>
<li><span style="font-size: 18px;">模板变量</span></li>
<li><span style="font-size: 18px;">模板语句</span></li>
<li><span style="font-size: 18px;">过滤器</span></li>
<li><span style="font-size: 18px;">注释</span></li>
<li><span style="font-size: 18px;">模板继承</span></li>
</ul>
<h2 id="1-模板变量"><span style="color: #00ff00;">1. 模板变量</span></h2>
<p><span style="font-size: 18px;">变量名必须由字母、数字、下划线（不能以下划线开头）和点组成，语法如下：</span></p>
<pre><code><span style="font-size: 18px;"><code class="lang-python">{{ 变量 }}
</code></span></pre>
<p><span style="font-size: 18px;">模板变量可以使python的内建类型，也可以是对象。</span></p>
<h2 id="2-模板语句"><span style="color: #00ff00;">2. 模板语句</span></h2>
<p><span style="font-size: 18px;"><strong>1）for循环：</strong></span></p>
<pre><code><span style="font-size: 18px;"><code class="lang-python">{% for item in 列表 %}
    {{forloop.counter}}  &lt;1-- 表示当前是第几次循环，从1开始 --&gt;
    {{forloop.counter0}}  &lt;!-- 表示当前是第几次循环，从0开始 --&gt;
<span style="color: #ff0000;">{% empty %}  查下
    列表为空或不存在时执行此逻辑</span>
{% endfor %}
</code></span></pre>
<p><span style="font-size: 18px;"><strong>2）if条件：</strong></span></p>
<pre><code><span style="font-size: 18px;"><code class="lang-python">{% <span class="hljs-keyword">if ... %}
    逻辑<span class="hljs-number">1
{% <span class="hljs-keyword">elif ... %}
    逻辑<span class="hljs-number">2
{% <span class="hljs-keyword">else %}
    逻辑<span class="hljs-number">3
{% endif %}
</span></span></span></span></span></span></code></span></pre>
<p><span style="font-size: 18px;">比较运算符如下：</span></p>
<pre><code><span style="font-size: 18px;"><code class="lang-python">==
!=
&lt;
&gt;
&lt;=
&gt;=
</code></span></pre>
<p><span style="font-size: 18px;">布尔运算符如下：</span></p>
<pre><code><span style="font-size: 18px;"><code class="lang-python"><span class="hljs-keyword">and
<span class="hljs-keyword">or
<span class="hljs-keyword">not
</span></span></span></code></span></pre>
<p><span style="font-size: 18px;"><strong>注意：运算符左右两侧必须有空格。</strong></span></p>
<pre><code><span style="font-size: 18px;"><code class="lang-python">{% <span class="hljs-keyword">if a == <span class="hljs-number">1 %}  <span class="hljs-comment"># 正确
{% <span class="hljs-keyword">if a==<span class="hljs-number">1 %}  <span class="hljs-comment"># 错误</span></span></span></span></span></span></code></span></pre>
<h2 id="3-过滤器"><span style="color: #00ff00;">3. 过滤器</span></h2>
<p><span style="font-size: 18px;">语法如下:</span></p>
<ul>
<li><span style="font-size: 18px;">使用管道符号|来应用过滤器，用于进行计算、转换操作，可以使用在变量、标签中。</span></li>
<li>
<p><span style="font-size: 18px; color: #ff0000;">如果过滤器需要参数，则使用冒号:传递参数。</span></p>
<pre><code><span style="font-size: 18px; color: #ff0000;"><code class="lang-python">变量|过滤器:参数     </code></span><span style="font-size: 18px;"><code class="lang-python">{% </code></span><span style="font-size: 18px;"><code class="lang-python"><span style="color: #ca9e4d; font-weight: bold;">if <span style="color: #c0c0c0; font-weight: bold;">forloop.<span style="color: #c0c0c0; font-weight: bold;">counter|<span style="color: #c0c0c0; font-weight: bold;">divisibleby:<span style="color: #f971bb;">2 %}</span></span></span></span></span>
</code></span><span style="font-size: 18px;">列举几个如下：</span></pre>
</li>
</ul>
<ul>
<li><span style="font-size: 18px;"><strong>safe</strong>，禁用html转义（显示html标签样式，而不是字符串）{{content|safe}}控制<span style="color: #00ccff;">一个</span></span></li>
<li><span style="font-size: 18px;">{% autoescape off%} 　{{content}}　{% endautoescape %}&nbsp; 关闭转义&nbsp; 可以控制<span style="color: #ff00ff;">多个</span></span></li>
<li><span style="font-size: 18px;"><strong>length</strong>，长度，返回字符串包含字符的个数，或列表、元组、字典的元素个数。</span></li>
<li>
<p><span style="font-size: 18px;"><strong>default</strong>，默认值，如果变量不存在时则返回默认值。</span></p>
<pre><code><span style="font-size: 18px;"><code class="lang-python">data|default:<span class="hljs-string">'默认值'
</span></code></span></pre>
</li>
<li>
<p><span style="font-size: 18px;"><strong>date</strong>，日期，用于对日期类型的值进行字符串格式化，常用的格式化字符如下：</span></p>
<ul>
<li><span style="font-size: 18px;">Y表示年，格式为4位，y表示两位的年。</span></li>
<li><span style="font-size: 18px;">m表示月，格式为01,02,12等。</span></li>
<li><span style="font-size: 18px;">d表示日, 格式为01,02等。</span></li>
<li><span style="font-size: 18px;">j表示日，格式为1,2等。</span></li>
<li><span style="font-size: 18px;">H表示时，24进制，h表示12进制的时。</span></li>
<li><span style="font-size: 18px;">i表示分，为0-59。</span></li>
<li><span style="font-size: 18px;">s表示秒，为0-59。</span></li>
</ul>
<pre><code><span style="font-size: 18px;"><code>value|date:"Y年m月j日  H时i分s秒"</code></span></pre>
</li>
</ul>
<h2 id="4-注释"><span style="color: #00ff00;">4. 注释</span></h2>
<p><span style="font-size: 18px;">1）单行注释语法如下：</span></p>
<pre><code><span style="font-size: 18px;"><code class="lang-python">{<span class="hljs-comment">#...#}
</span></code></span></pre>
<p><span style="font-size: 18px;">2）多行注释使用comment标签，语法如下：</span></p>
<pre><code><span style="font-size: 18px;"><code class="lang-python">{% comment %}
...
{% endcomment %}</code></span></pre>
<h2 id="5-模板继承"><span style="color: #00ff00;">5. 模板继承</span></h2>
<ul>
<li><span style="font-size: 18px;">模板继承和类的继承含义是一样的</span></li>
<li><span style="font-size: 18px;">可以使用模板继承来复用父模板，提高代码的复用性，减轻开发人员的工作量。</span></li>
<li><span style="font-size: 18px;">可以通过定义&nbsp;<code>block</code>&nbsp;，实现子模板对父模块内容的重写</span></li>
</ul>
<p><span style="font-size: 18px; color: #ff99cc;"><strong>父模板</strong></span></p>
<p><span style="font-size: 18px;">如果发现在多个模板中某些内容相同，那就可以使用<code>block</code>标签把这段内容定义到父模板中。</span></p>
<pre><code><span style="font-size: 18px;"><code class="lang-python">{% block 块名称 %}
    预留区域，可以编写默认内容，也可以没有默认内容
{% endblock %}
</code></span></pre>
<p><span style="font-size: 18px; color: #ff99cc;"><strong>子模板</strong></span></p>
<ol>
<li>
<p><span style="font-size: 18px;"><span style="color: #ff0000;">使用<code>extends</code>标签继承父模板，写在子模板文件的第一行。</span></span></p>
<pre><code><span style="font-size: 18px;"><code class="lang-python"> {% extends <span class="hljs-string">"父模板路径" %}
</span></code></span></pre>
</li>
<li>
<p><span style="font-size: 18px;">对有需要的<code>block</code>进行重写：</span></p>
<ul>
<li><span style="font-size: 18px;">不用重写父模版中的所有block，如果子模版没有重写，则使用父模版定义的默认值。</span></li>
<li>
<p><span style="font-size: 18px;"><span style="color: #ff0000;">可以使用&nbsp;<code>block.super</code>&nbsp;来包含父模板的块中定义的内容</span>，如下</span></p>
<pre><code><span style="font-size: 18px;"><code>  {% block 名称 %}
      子模板的内容
      {{ block.super }}    显示父模板中block的内容
  {% endblock %}</code></span></pre>
</li>
</ul>
</li>
</ol>
<p><span style="font-size: 18px; color: #00ccff;">django文档参考</span></p>
<p><span style="font-size: 18px; color: #00ccff;">&lt;https://docs.djangoproject.com/zh-hans/2.1/ref/templates/builtins/&gt;</span></p>
<p><span style="font-size: 18px; color: #00ccff;">django过滤器大全</span></p>
<p><span style="font-size: 18px; color: #00ccff;">&lt;https://www.cnblogs.com/Deaseyy/p/10859893.html&gt;</span></p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>