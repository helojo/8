<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Django项目 项目环境搭建   ----   二、django项目设置' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Django项目 项目环境搭建   ----   二、django项目设置</center></div><div class='banquan'>原文出处:本文由博客园博主Tmclri提供。<br/>
原文连接:https://www.cnblogs.com/Tmclri/p/11515365.html</div><br>
    <h4 class="md-end-block md-heading md-focus"><span class="md-plain md-expand">1.配置模板文件</span></h4>
<div class="cnblogs_code">
<pre><code>TEMPLATES =<span style="color: #000000;"> [
    {
        </span><span style="color: #800000;">'</span><span style="color: #800000;">BACKEND</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">django.template.backends.django.DjangoTemplates</span><span style="color: #800000;">'</span><span style="color: #000000;">,
        </span><span style="color: #800000;">'</span><span style="color: #800000;">DIRS</span><span style="color: #800000;">'</span>: [os.path.join(BASE_DIR, <span style="color: #800000;">'</span><span style="color: #800000;">templates</span><span style="color: #800000;">'</span><span style="color: #000000;">)],
        </span><span style="color: #800000;">'</span><span style="color: #800000;">APP_DIRS</span><span style="color: #800000;">'</span><span style="color: #000000;">: True,
        </span><span style="color: #800000;">'</span><span style="color: #800000;">OPTIONS</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
            </span><span style="color: #800000;">'</span><span style="color: #800000;">context_processors</span><span style="color: #800000;">'</span><span style="color: #000000;">: [
                </span><span style="color: #800000;">'</span><span style="color: #800000;">django.template.context_processors.debug</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                </span><span style="color: #800000;">'</span><span style="color: #800000;">django.template.context_processors.request</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                </span><span style="color: #800000;">'</span><span style="color: #800000;">django.contrib.auth.context_processors.auth</span><span style="color: #800000;">'</span><span style="color: #000000;">,
                </span><span style="color: #800000;">'</span><span style="color: #800000;">django.contrib.messages.context_processors.messages</span><span style="color: #800000;">'</span><span style="color: #000000;">,
            ],
            </span><span style="color: #008000;">#</span><span style="color: #008000;"> 将模板标签内置到模板中 https://docs.djangoproject.com/en/2.1/topics/templates/</span>
            <span style="color: #800000;">'</span><span style="color: #800000;">builtins</span><span style="color: #800000;">'</span>: [<span style="color: #800000;">'</span><span style="color: #800000;">django.templatetags.static</span><span style="color: #800000;">'</span><span style="color: #000000;">],
        },
    },
]</span></pre>
</div>
<p>&nbsp;</p>
<h4 class="md-end-block md-heading"><span class="md-plain">2.配置mysql数据库</span></h4>
<ol class="ol-list" start="">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">创建数据库</span></p>
<div class="cnblogs_code">
<pre><code>mysql&gt; create database tzproject charset=<span style="color: #000000;">utf8mb4;
Query OK, </span>1 row affected (0.00 sec)</pre>
</div>
</li>
<li class="md-list-item"><span class="md-plain"><span class="md-plain">创建用户</span></span>
<div class="cnblogs_code">
<pre><code>mysql&gt; create user <span style="color: #800000;">'</span><span style="color: #800000;">dj_user</span><span style="color: #800000;">'</span>@<span style="color: #800000;">'</span><span style="color: #800000;">%</span><span style="color: #800000;">'</span> identified by <span style="color: #800000;">'</span><span style="color: #800000;">pythonvip</span><span style="color: #800000;">'</span><span style="color: #000000;">;
Query OK, </span>1 row affected (0.00 sec)</pre>
</div>
</li>
<li class="md-list-item"><span class="md-plain"><span class="md-plain">授权</span></span>
<div class="cnblogs_code">
<pre><code>mysql&gt; grant all privileges on tzproject.* to <span style="color: #800000;">'</span><span style="color: #800000;">dj_user</span><span style="color: #800000;">'</span>@<span style="color: #800000;">'</span><span style="color: #800000;">%</span><span style="color: #800000;">'</span><span style="color: #000000;">;
Query OK, 0 rows affected (</span>0.03<span style="color: #000000;"> sec)
mysql</span>&gt;<span style="color: #000000;"> flush privileges;
Query OK, 0 rows affected (</span>0.02<span style="color: #000000;"> sec)
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 授权创建一起写</span>
grant all privileges on tzproject.* to <span style="color: #800000;">'</span><span style="color: #800000;">xinlan</span><span style="color: #800000;">'</span>@<span style="color: #800000;">'</span><span style="color: #800000;">%</span><span style="color: #800000;">'</span> identified by <span style="color: #800000;">'</span><span style="color: #800000;">pythonvip</span><span style="color: #800000;">'</span></pre>
</div>
</li>
<li class="md-list-item">
<p class="md-end-block md-p md-focus"><span class="md-plain md-expand">配置settings</span></p>
<p class="md-end-block md-p"><span class="md-plain">方法一：直接在settings.py文件中添加数据库配置信息</span></p>
<div class="cnblogs_code">
<pre><code>DATABASES =<span style="color: #000000;"> {
    </span><span style="color: #800000;">'</span><span style="color: #800000;">default</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
        </span><span style="color: #800000;">'</span><span style="color: #800000;">ENGINE</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">django.db.backends.mysql</span><span style="color: #800000;">'</span>,               <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库引擎</span>
        <span style="color: #800000;">'</span><span style="color: #800000;">NAME</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">tzproject</span><span style="color: #800000;">'</span>,                                <span style="color: #008000;">#</span><span style="color: #008000;"> 数据库名</span>
        <span style="color: #800000;">'</span><span style="color: #800000;">USER</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">dj_user</span><span style="color: #800000;">'</span>,                                  <span style="color: #008000;">#</span><span style="color: #008000;"> 用户名</span>
        <span style="color: #800000;">'</span><span style="color: #800000;">PASSWORD</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">pythonvip</span><span style="color: #800000;">'</span>,                            <span style="color: #008000;">#</span><span style="color: #008000;"> 密码</span>
        <span style="color: #800000;">'</span><span style="color: #800000;">HOST</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">127.0.0.1</span><span style="color: #800000;">'</span>,                                <span style="color: #008000;">#</span><span style="color: #008000;"> 主机IP</span>
        <span style="color: #800000;">'</span><span style="color: #800000;">PORT</span><span style="color: #800000;">'</span>: 3306                                        <span style="color: #008000;">#</span><span style="color: #008000;"> 端口</span>
<span style="color: #000000;">    }
}</span></pre>
</div>
<p class="md-end-block md-p md-focus"><span class="md-plain md-expand">方法二：将数据库配置信息存到一个文件，在settings文件中将其引入。（推荐）</span></p>
<p class="md-end-block md-p md-focus"><span class="md-plain md-expand">新建数据库配置文件<code>db.cnf</code><span class="md-plain">(名字随意)</span><img src="./images/Django项目 项目环境搭建   ----   二、django项目设置0.png" alt="" /></span></p>
<p class="md-end-block md-p"><span class="md-plain"><span><span class="md-plain">db.cnf文件内容：</span></span></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">[client]
database </span>=<span style="color: #000000;"> tzproject
user </span>=<span style="color: #000000;"> dj_user
password </span>=<span style="color: #000000;"> pythonvip
host </span>= 127.0.0.1<span style="color: #000000;">
port </span>= 3306<span style="color: #000000;">
default</span>-character-set = utf8</pre>
</div>
<p class="md-end-block md-p"><span class="md-plain"><span><span class="md-plain"><br />在settings.py文件中引入db.cnf</span></span></span></p>
<div class="cnblogs_code">
<pre><code>DATABASES =<span style="color: #000000;"> {
    </span><span style="color: #800000;">'</span><span style="color: #800000;">default</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
        </span><span style="color: #800000;">'</span><span style="color: #800000;">ENGINE</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">django.db.backends.mysql</span><span style="color: #800000;">'</span><span style="color: #000000;">,
        </span><span style="color: #800000;">'</span><span style="color: #800000;">OPTIONS</span><span style="color: #800000;">'</span><span style="color: #000000;">:{
            </span><span style="color: #800000;">'</span><span style="color: #800000;">read_default_file</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">utils/db/db.cnf</span><span style="color: #800000;">'</span><span style="color: #000000;">，
        }
    }
}</span></pre>
</div>
<p class="md-end-block md-p"><span class="md-plain"><span><span class="md-plain"><br /><span class="md-plain md-expand">官方文档：<span class="md-link md-expand"><a href="https://docs.djangoproject.com/en/2.1/ref/databases/#connecting-to-the-database">https://docs.djangoproject.com/en/2.1/ref/databases/#connecting-to-the-database</a></span></span><br /></span></span></span></p>

</li>

</ol>
<h4 class="md-end-block md-heading"><span class="md-plain">3.安装mysql数据库的python驱动</span></h4>
<p class="md-end-block md-p md-focus"><span class="md-plain md-expand">⚠️mysql数据库配置完成后，运行django服务会报如下错误，官方推荐安装mysqlclient1.3.7以上版本，也可以安装pymysql，并且需要在settings.py文件所在目录包中的<span><code>__init__.py</code><span class="md-plain">中导入pymysql。</span></span></span><img src="./images/Django项目 项目环境搭建   ----   二、django项目设置1.png" alt="" /></p>
<p>&nbsp;</p>
<p>1. 安装mysqlclient</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> 首先更新ubuntu</span>
sudo apt-<span style="color: #000000;">get update 

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 然后按照依赖库</span>
sudo apt-get install default-libmysqlclient-<span style="color: #000000;">dev

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 再切换到虚拟环境中</span>
<span style="color: #000000;">workon tzproject

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 最后安装mysqlclient</span>
pip install mysqlclient -i https://pypi.doubanio.com/simple</pre>
</div>
<p>2.安装pymysql</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> 安装pymysql</span>
pip install pymysql -i https://pypi.doubanio.com/simple</pre>
</div>
<p>　　<span class="md-plain md-expand">在<span><code>settings.py</code><span class="md-plain">文件所在目录下的<span><code>__init__.py</code><span class="md-plain">导入</span></span></span></span></span><img src="./images/Django项目 项目环境搭建   ----   二、django项目设置2.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p class="md-end-block md-p"><span class="md-plain">推荐使用第一种方式，<span><code>mysqlclient</code><span class="md-plain">更快更安全，官方推荐。</span></span></span></p>
<h4 class="md-end-block md-heading"><span class="md-plain">4.配置redis缓存</span></h4>
<p class="md-end-block md-p md-focus"><span class="md-plain">用于存放用户session信息，以及需要缓存的各种信息。</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> 在虚拟机中安装django-redis</span>
pip install django-redis    </pre>
</div>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> settings.py文件中指定redis配置</span>
<span style="color: #000000;">
CACHES </span>=<span style="color: #000000;"> {
    </span><span style="color: #800000;">"</span><span style="color: #800000;">default</span><span style="color: #800000;">"</span><span style="color: #000000;">: {
        </span><span style="color: #800000;">"</span><span style="color: #800000;">BACKEND</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">django_redis.cache.RedisCache</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">LOCATION</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">redis://127.0.0.1:6379/0</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">OPTIONS</span><span style="color: #800000;">"</span><span style="color: #000000;">: {
            </span><span style="color: #800000;">"</span><span style="color: #800000;">CLIENT_CLASS</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">django_redis.client.DefaultClient</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        }
    },
    </span><span style="color: #800000;">'</span><span style="color: #800000;">session</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
        </span><span style="color: #800000;">'</span><span style="color: #800000;">BACKEND</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">django_redis.cache.RedisCache</span><span style="color: #800000;">'</span><span style="color: #000000;">,
        </span><span style="color: #800000;">'</span><span style="color: #800000;">LOCATION</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">redis://127.0.0.1:6379/1</span><span style="color: #800000;">'</span><span style="color: #000000;">,
        </span><span style="color: #800000;">'</span><span style="color: #800000;">OPTIONS</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
            </span><span style="color: #800000;">'</span><span style="color: #800000;">CLIENT_CLASS</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">django_redis.client.DefaultClient</span><span style="color: #800000;">'</span><span style="color: #000000;">,
        }
    },
}

</span><span style="color: #008000;">#</span><span style="color: #008000;"> session存储缓存设置</span>
SESSION_ENGINE = <span style="color: #800000;">'</span><span style="color: #800000;">django.contrib.sessions.backends.cache</span><span style="color: #800000;">'</span><span style="color: #000000;">
SESSION_CACHE_ALIAS </span>= <span style="color: #800000;">'</span><span style="color: #800000;">session</span><span style="color: #800000;">'</span></pre>
</div>
<p class="md-end-block md-p"><span class="md-plain">文档地址：<span class="md-link"><a href="https://django-redis-chs.readthedocs.io/zh_CN/latest/">https://django-redis-chs.readthedocs.io/zh_CN/latest/</a></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">django文档：<span class="md-link"><a href="https://docs.djangoproject.com/en/2.2/topics/http/sessions/#using-cached-sessions">https://docs.djangoproject.com/en/2.2/topics/http/sessions/#using-cached-sessions</a></span></span></p>
<h4 class="md-end-block md-heading"><span class="md-plain">5.配置日志器</span></h4>
<p class="md-end-block md-p"><span class="md-plain">用于记录系统运行过程中的各种日志信息。</span></p>
<p class="md-end-block md-p"><span class="md-plain">在项目根目录中创建一个logs文件夹，用于存放日志文件</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> 日志</span>
LOGGING =<span style="color: #000000;"> {
    </span><span style="color: #008000;">#</span><span style="color: #008000;"> 版本</span>
    <span style="color: #800000;">'</span><span style="color: #800000;">version</span><span style="color: #800000;">'</span>: 1<span style="color: #000000;">,
    </span><span style="color: #008000;">#</span><span style="color: #008000;"> 是否禁用已存在的日志器</span>
    <span style="color: #800000;">'</span><span style="color: #800000;">disable_existing_loggers</span><span style="color: #800000;">'</span><span style="color: #000000;">: False,
    </span><span style="color: #800000;">'</span><span style="color: #800000;">formatters</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
        </span><span style="color: #800000;">'</span><span style="color: #800000;">verbose</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
            </span><span style="color: #800000;">'</span><span style="color: #800000;">format</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">{levelname} {asctime} {module} {lineno:d} {message}</span><span style="color: #800000;">'</span><span style="color: #000000;">,
            </span><span style="color: #800000;">'</span><span style="color: #800000;">style</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">{</span><span style="color: #800000;">'</span><span style="color: #000000;">,
        },
        </span><span style="color: #800000;">'</span><span style="color: #800000;">simple</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
            </span><span style="color: #800000;">'</span><span style="color: #800000;">format</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">{levelname} {module} {lineno:d} {message}</span><span style="color: #800000;">'</span><span style="color: #000000;">,
            </span><span style="color: #800000;">'</span><span style="color: #800000;">style</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">{</span><span style="color: #800000;">'</span><span style="color: #000000;">,
        },
    },
    </span><span style="color: #800000;">'</span><span style="color: #800000;">filters</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
        </span><span style="color: #800000;">'</span><span style="color: #800000;">require_debug_true</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
            </span><span style="color: #800000;">'</span><span style="color: #800000;">()</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">django.utils.log.RequireDebugTrue</span><span style="color: #800000;">'</span><span style="color: #000000;">,
        },
    },
    </span><span style="color: #800000;">'</span><span style="color: #800000;">handlers</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
        </span><span style="color: #800000;">'</span><span style="color: #800000;">console</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
            </span><span style="color: #800000;">'</span><span style="color: #800000;">level</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">DEBUG</span><span style="color: #800000;">'</span><span style="color: #000000;">,
            </span><span style="color: #800000;">'</span><span style="color: #800000;">filters</span><span style="color: #800000;">'</span>: [<span style="color: #800000;">'</span><span style="color: #800000;">require_debug_true</span><span style="color: #800000;">'</span><span style="color: #000000;">],
            </span><span style="color: #800000;">'</span><span style="color: #800000;">class</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">logging.StreamHandler</span><span style="color: #800000;">'</span><span style="color: #000000;">,
            </span><span style="color: #800000;">'</span><span style="color: #800000;">formatter</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">simple</span><span style="color: #800000;">'</span><span style="color: #000000;">
        },
        </span><span style="color: #800000;">'</span><span style="color: #800000;">file</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
            </span><span style="color: #800000;">'</span><span style="color: #800000;">level</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">INFO</span><span style="color: #800000;">'</span><span style="color: #000000;">,
            </span><span style="color: #008000;">#</span><span style="color: #008000;"> 这个handler可以记录一组日志文件</span>
            <span style="color: #800000;">'</span><span style="color: #800000;">class</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">logging.handlers.RotatingFileHandler</span><span style="color: #800000;">'</span><span style="color: #000000;">,
            </span><span style="color: #800000;">'</span><span style="color: #800000;">filename</span><span style="color: #800000;">'</span>: os.path.join(BASE_DIR, <span style="color: #800000;">'</span><span style="color: #800000;">logs/tz_django.log</span><span style="color: #800000;">'</span><span style="color: #000000;">),
            </span><span style="color: #008000;">#</span><span style="color: #008000;"> 单个日志文件最大字节数</span>
            <span style="color: #800000;">'</span><span style="color: #800000;">maxBytes</span><span style="color: #800000;">'</span>: 300*1024*1024<span style="color: #000000;">,
            </span><span style="color: #008000;">#</span><span style="color: #008000;"> 日志文件个数</span>
            <span style="color: #800000;">'</span><span style="color: #800000;">backupCount</span><span style="color: #800000;">'</span>: 10<span style="color: #000000;">,
            </span><span style="color: #800000;">'</span><span style="color: #800000;">formatter</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">verbose</span><span style="color: #800000;">'</span><span style="color: #000000;">
        },
    },
    </span><span style="color: #800000;">'</span><span style="color: #800000;">loggers</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
        </span><span style="color: #800000;">'</span><span style="color: #800000;">django</span><span style="color: #800000;">'</span><span style="color: #000000;">: {
            </span><span style="color: #800000;">'</span><span style="color: #800000;">handlers</span><span style="color: #800000;">'</span>: [<span style="color: #800000;">'</span><span style="color: #800000;">console</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">file</span><span style="color: #800000;">'</span><span style="color: #000000;">],
            </span><span style="color: #800000;">'</span><span style="color: #800000;">level</span><span style="color: #800000;">'</span>: <span style="color: #800000;">'</span><span style="color: #800000;">INFO</span><span style="color: #800000;">'</span>,  <span style="color: #008000;">#</span><span style="color: #008000;"> 日志器接收的最低级别</span>
            <span style="color: #800000;">'</span><span style="color: #800000;">propagate</span><span style="color: #800000;">'</span><span style="color: #000000;">: True,
        },
    },
}</span></pre>
</div>
<p>使用方法</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> 使用方法</span><span style="color: #008000;">
#</span><span style="color: #008000;"> import the logging library</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> logging

</span><span style="color: #008000;">#</span><span style="color: #008000;"> Get an instance of a logger</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 此处的django为，settings.py文件中，LOGGING配置下的loggers中定义的日志器名称</span>
logger = logging.getLogger(<span style="color: #800000;">'</span><span style="color: #800000;">django</span><span style="color: #800000;">'</span><span style="color: #000000;">)    

</span><span style="color: #0000ff;">def</span><span style="color: #000000;"> my_view(request, arg1, arg):
    ...
    </span><span style="color: #0000ff;">if</span> ***<span style="color: #000000;">:
        </span><span style="color: #008000;">#</span><span style="color: #008000;"> Log an error message</span>
        logger.error(<span style="color: #800000;">'</span><span style="color: #800000;">Something went wrong!</span><span style="color: #800000;">'</span>)</pre>
</div>
<p class="md-end-block md-p"><span class="md-plain">官方文档：<span class="md-link"><a href="https://docs.djangoproject.com/en/2.2/topics/logging/#module-django.utils.log">https://docs.djangoproject.com/en/2.2/topics/logging/#module-django.utils.log</a></span></span></p>
<h4 class="md-end-block md-heading md-focus"><span class="md-plain">6.时区配置</span></h4>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> 修改语言</span>
LANGUAGE_CODE = <span style="color: #800000;">'</span><span style="color: #800000;">zh-hans</span><span style="color: #800000;">'</span>
<span style="color: #008000;">#</span><span style="color: #008000;"> 修改时区</span>
TIME_ZONE = <span style="color: #800000;">'</span><span style="color: #800000;">Asia/Shanghai</span><span style="color: #800000;">'</span><span style="color: #000000;">

USE_I18N </span>=<span style="color: #000000;"> True

USE_L10N </span>=<span style="color: #000000;"> True
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 使用时区</span>
USE_TZ = True</pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">7.静态文件配置</span></h4>
<p class="md-end-block md-p md-focus"><span class="md-plain md-expand">在项目根目录创建一个static目录，用于存放静态文件(css, js, image, font等)</span></p>
<div class="cnblogs_code">
<pre><code>STATIC_URL = <span style="color: #800000;">'</span><span style="color: #800000;">/static/</span><span style="color: #800000;">'</span><span style="color: #000000;">
STATICFILES_DIRS </span>=<span style="color: #000000;"> [
    os.path.join(BASE_DIR, </span><span style="color: #800000;">'</span><span style="color: #800000;">static</span><span style="color: #800000;">'</span><span style="color: #000000;">)
]</span></pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">8.创建应用</span></h4>
<p class="md-end-block md-p md-focus"><span class="md-plain md-expand">本项目主要由4个模块组成，分别为新闻文章模块，课程视频播放模块，文档下载模块，用户管理模块等。在项目根目录下创建一个apps目录用于存放各子应用。</span></p>
<p class="md-end-block md-p md-focus"><img src="./images/Django项目 项目环境搭建   ----   二、django项目设置3.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;然后cd到apps目录创建各子应用</p>
<div class="cnblogs_code">
<pre><code>~$ cd ~/code/tztz/apps/
~/code/tztz/<span style="color: #000000;">apps$ workon tzproject
(tzproject) </span>~/code/tztz/apps$ python ../<span style="color: #000000;">manage.py startapp news
(tzproject) </span>~/code/tztz/apps$ python ../<span style="color: #000000;">manage.py startapp course
(tzproject) </span>~/code/tztz/apps$ python ../<span style="color: #000000;">manage.py startapp doc
(tzproject) </span>~/code/tztz/apps$ python ../manage.py startapp user</pre>
</div>
<p>再到settings文件中，加入如下设置</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> sys

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 创建应用之后，把apps目录加入到sys.path中</span>
<span style="color: #000000;">sys.path.insert(0, BASE_DIR)
sys.path.insert(</span>1, os.path.join(BASE_DIR, <span style="color: #800000;">'</span><span style="color: #800000;">apps</span><span style="color: #800000;">'</span>))</pre>
</div>
<p class="md-end-block md-p"><span class="md-plain">接着分别在apps文件夹和项目根目录文件夹上右键，加入到Source Root中，优化导入路径(pycharm提示)。</span></p>
<p class="md-end-block md-p md-focus">&nbsp;<img src="./images/Django项目 项目环境搭建   ----   二、django项目设置4.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;最后将应用添加到INSTALLED_APPS列表中</p>
<div class="cnblogs_code">
<pre><code>INSTALLED_APPS =<span style="color: #000000;"> [
    </span><span style="color: #008000;">#</span><span style="color: #008000;"> ...</span>
    <span style="color: #800000;">'</span><span style="color: #800000;">user</span><span style="color: #800000;">'</span><span style="color: #000000;">,
    </span><span style="color: #800000;">'</span><span style="color: #800000;">news</span><span style="color: #800000;">'</span><span style="color: #000000;">,
    </span><span style="color: #800000;">'</span><span style="color: #800000;">doc</span><span style="color: #800000;">'</span><span style="color: #000000;">,
    </span><span style="color: #800000;">'</span><span style="color: #800000;">course</span><span style="color: #800000;">'</span><span style="color: #000000;">
]</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>