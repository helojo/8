<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）</center></div><div class='banquan'>原文出处:本文由博客园博主奶爸码农提供。<br/>
原文连接:https://www.cnblogs.com/wdsunny/p/12058615.html</div><br>
    <div>
<h1 class="heading" data-id="heading-0">1 引言</h1>
<p>为了了解当前前端的发展趋势，让我们从国内各大互联网大厂开始，了解他们的最新动态和未来规划。这是解密大厂前端技术体系的第四篇，前三篇已经讲述了阿里、腾讯、百度在前端技术这几年的技术发展。</p>
<p>这一篇从携程讲起。</p>
<h1 class="heading" data-id="heading-1">携程技术全景图</h1>
<p><strong>移动技术产品</strong></p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）0.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）0.png" data-width="1280" data-height="553" />
<p>&nbsp;</p>
<p>移动技术产品分为四大模块：</p>
<ul>
<li><strong>技术平台</strong>：MCD（持续交付平台），APM（性能监控平台），MTS（日志排障平台）和MTP（无线技术平台）</li>
<li><strong>通信层</strong>：通信工具，消息推送平台，服务端推送</li>
<li><strong>框架层</strong>：涵盖App中通用能力，例如设备信息、位置信息、热更新、网络通信、配置、用户行为埋点等等</li>
<li><strong>业务层</strong>：通用的业务组件，例如分享功能、多媒体、日历、地图等等</li>
</ul>
<p><strong>大前端技术框架</strong></p>
<p>携程在大前端技术框架层面主要面向不同应用场景沉淀了三个技术框架：</p>
<ul>
<li><strong>CRN框架</strong>：Ctrip React Native，基于RN定制化的框架，并且完善了周边的打包、部署、监控等等能力</li>
<li><strong>Node平台</strong>：Node服务的框架，涵盖从编码、编译、发布、监控全流程</li>
<li><strong>Hybrid平台</strong>：用于App内Hybrid WebView框架</li>
</ul>
<p><strong>新技术探索</strong></p>
<ul>
<li><strong>新技术</strong>：HTTP/2，VOIP</li>
<li><strong>新产品</strong>：小程序、快应用、VR/AR</li>
</ul>
<h1 class="heading" data-id="heading-2">MCD - 持续交付平台</h1>
<p>MCD经历了多次大型迭代，逐步成为携程内部持续交付平台，涵盖了集成阶段、测试阶段、发布阶段和运营阶段的全流程研发环节。</p>
<p><strong>MCD 1.0</strong></p>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）1.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）1.png" data-width="1280" data-height="849" />
<p>&nbsp;</p>
<p>MCD1.0的出现解决了系统在线打包的问题，并且通过CI/CD实现定时打包、代码静态扫描、自动化验包-白屏监测的能力。</p>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）2.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）2.png" data-width="1280" data-height="753" />
<p>&nbsp;</p>
<p>持续集成阶段接入了代码扫描和冒烟测试的功能，通过infer和sonar进行代码的静态检查，并且统一集成单元测试能力，提供单测的结果和覆盖率。</p>
<p>冒烟测试可以监测白屏情况，并且进行多机型兼容测试，通过内容和图像对比提前发现问题。</p>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）3.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）3.png" data-width="1280" data-height="1002" />
<p>&nbsp;</p>
<p>通过集成编译，持续减低App编译的时长，提高研发测试效率。</p>
<p><strong>MCD 2.0</strong></p>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）4.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）4.png" data-width="1280" data-height="700" />
<p>&nbsp;</p>
<p>MCD 2.0重新定义了MCD，涵盖了更为广泛的范围，包含集成、测试、发布、运营环节。并且由各个模块各自打包生成Bundle，再通过Bundle集成达到2~3分钟极速出包的能力。</p>
<p>同时MCD也增强了许多能力：</p>
<ul>
<li>发布升级：对于Hotfix、Bundle、Hybrid/RN等内容实现动态下发，实现白名单、灰度发布能力，通过差分方式提高下载效率，并且提供大盘实时查看下发情况。</li>
<li>配置中心：支持按照平台、版本、渠道、ABTest等不同维度下发配置信息，实现App配置信息管理能力。</li>
<li>崩溃收集：App Crash/JS Error的收集，并且支持实时告警，多维度搜索，代码反查等能力。</li>
<li>App Size管理：基于业务模块进行App包大小管理</li>
</ul>
<h1 class="heading" data-id="heading-3">APM - 性能监控平台</h1>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）5.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）5.png" data-width="1280" data-height="614" />
<p>&nbsp;</p>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）6.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）6.png" data-width="1280" data-height="688" />
<p>&nbsp;</p>
<p>APM性能监控平台主要关注性能、崩溃、异常等数据的监控，携程在性能与异常监控上也做了许多工作：</p>
<ul>
<li>网络性能：收敛了网络通信SDK，统一了三端的网络通信底层能力，网络SDK可以统一管理IP池、链路池、请求池，达到性能最优化。并且可以监控在网络请求全链路中的错误情况，实现业务场景联通成功率99%。</li>
</ul>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）7.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）7.png" data-width="1280" data-height="514" />
<p>&nbsp;</p>
<ul>
<li>页面性能：在页面性能统计口径上采用TTI，通过遍历检测页面文本的变化来判断是否到达TTI。根据不同的页面形态，制定了不同的性能指标。</li>
</ul>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）8.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）8.png" data-width="1280" data-height="836" />
<p>&nbsp;</p>
<ul>
<li>异常处理：收集异常卡顿的情况并且自动归属到不同业务团队，崩溃信息收集可以固化下来用户的操作路径和相关信息。</li>
</ul>
<h1 class="heading" data-id="heading-4">MTS - 日志排障平台</h1>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）9.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）9.png" data-width="1280" data-height="882" />
<p>&nbsp;</p>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）10.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）10.png" data-width="1280" data-height="628" />
<p>&nbsp;</p>
<p>收集App中所有相关数据，例如网络请求、页面跳转、图片请求、用户行为埋点、Cat日志、Web服务日志，并且通过时间轴将所有数据串联起来，可以帮助研发同学快速还原现场排查问题。</p>
<p>在日志展示上以一次用户session为集合，按照时间轴显示不同的页面信息，同时在每个页面的详细信息中会提供当前页面所有的网络请求、用户行为埋点、研发自主埋点等等内容。</p>
<h1 class="heading" data-id="heading-5">MTP - 无线技术平台</h1>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）11.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）11.png" data-width="1280" data-height="738" />
<p>&nbsp;</p>
<p>打造无线技术平台，将App中通用能力沉淀下来，并且复用到多个App中，避免重复造轮子，提高研发标准化与效率。同时平台治理提供例如注册服务、排查故障、服务熔断、查看调用等功能，方便平台化技术的运营。</p>
<h1 class="heading" data-id="heading-6">CRN - Ctrip React Native</h1>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）12.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）12.png" data-width="1080" data-height="355" />
<p>&nbsp;</p>
<p>CRN是携程内部基于React Native进行深度定制的移动端跨平台/动态化框架，目前已经在实际的业务项目中大规模应用，页面规模超过100个，PV数目已经超过传统Hybrid H5页面的2倍多。</p>
<p>基于React Native框架优化，定制成适合携程业务的跨平台开发框架 - CRN，提供从开发、发布、运维的全生命周期支持。</p>
<ul>
<li>
<p>开发框架，主要是提供在开发阶段的支持。包括工具&amp;文档、组件和解决方案、跨平台打通和代码托管功能。 工具主要包括CLI和Packer，文档包括API文档和设计文档，跨平台主要是抹平平台差异组件间的API，代码托管是为了方便业务团队，特别是新加入CRN开发的团队，可以参考已有业务代码快速上手。</p>
</li>
<li>
<p>性能优化，主要是为了解决首屏渲染的性能问题和RN框架的稳定性问题。为了解决首屏渲染性能问题，我们先后开发了框架拆分和预加载、业务按需加载、业务预加载和渐进式渲染方案，稍后会就这些方案做详细介绍。</p>
</li>
<li>
<p>发布运维，主要是提供发布系统和性能、错误监控平台，让业务开发同事能够有完备的系统去发现和解决线上问题。</p>
</li>
</ul>
<p>详细信息可以查看：<a href="https://mp.weixin.qq.com/s?__biz=MjM5MDI3MjA5MQ==&amp;mid=2697268025&amp;idx=1&amp;sn=2d197c4cf7a338246abe0d3111e16002&amp;chksm=8376f40db4017d1b5d8a80ace47819dd7fe70f74a947239789808a1e9e4683e215d41133e164&amp;scene=21#wechat_redirect" rel="nofollow noopener noreferrer" target="_blank">干货 | 近万字长文详述携程大规模应用RN的工程化实践</a></p>
<h1 class="heading" data-id="heading-7">Node平台</h1>
<p>携程在2017年9月份正式上线了Node.js应用，历经2年时间，应用数实现了8倍增长，覆盖公司33个业务部门。</p>
<p>Node.js的工程化建设，涵盖开发、构建、测试、发布、运维各个环节：</p>
<ul>
<li>开发：根据业务场景提供不同的脚手架工程（SSR、DA Service、Desktop Application），提供核心中间件、数据Mock平台、Docker化的开发环境。</li>
<li>构建：安装依赖包，检查依赖包版本，构建目标文件，同时提供代码静态扫描，安全扫描的能力。</li>
<li>测试：提供自动化测试，集成测试，灰度测试和压力测试</li>
<li>发布：提供携程云和公有云发布能力，灰度发布和回滚能力，实现内部npm包开发发布流程与Git高度集成</li>
<li>运维：日志监控和应用排障的能力</li>
</ul>
<p>详细信息可以查看：<a href="https://mp.weixin.qq.com/s/uDwX0iq9RWs1sK1ct0tiCg" rel="nofollow noopener noreferrer" target="_blank">干货 | 浅谈Node.js在携程的应用</a></p>
<h1 class="heading" data-id="heading-8">GraphQL-BFF</h1>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）13.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）13.png" data-width="419" data-height="287" />
<p>&nbsp;</p>
<p>GraphQL-BFF 的核心思路是，将多个 services 整合成一个中心化 data graph。</p>
<p>每个 service 的数据结构契约，都放入了一个大而全的 GraphQL Schema 里；如果不做任何模块化和解耦，开发体验将会非常糟糕。每个团队成员，都去修改同一份 Schema 文件。</p>
<p>这明显是不合理的。GraphQL-BFF 的开发模式，应该跟 service 的领域模型，有一一对应的关系。然后通过某种形式，多个 services 自然整合到一起。</p>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）14.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）14.png" data-width="1080" data-height="116" />
<p>&nbsp;</p>
<p>技术选型上，开发语言选用了 TypeScript，跑在 Node.js v10.x 版本上，服务端框架是 Koa v2.x 版本，使用 apollo-server-koa 模块去运行 GraphQL 服务。</p>
<p>Apollo-GraphQL 是 Node.js 社区里，比较知名和成熟的 GraphQL 框架。做了很多的细节工作，也有一些相对前沿的探索，比如 Apollo Federation 架构等。</p>
<p>详细信息可以查看：<a href="https://mp.weixin.qq.com/s/PovMmO6ddcpBO5A2WtY89Q" rel="nofollow noopener noreferrer" target="_blank">干货 | 万字长文全面解析GraphQL，携程微服务背景下的前后端数据交互方案</a></p>
<h1 class="heading" data-id="heading-9">写在最后</h1>
<p>携程在组织架构上有基础研发团队进行保障，在大前端领域能够收敛、沉淀众多的基础平台服务、技术框架，形成了一套比较完整、统一的基础框架能力，很好的支撑了多App、多业务的快速发展。</p>
<p>本篇文章力图从大前端各个方面去整理总结携程当前的技术体系，但一定会有许多遗漏，同时开放信息毕竟有限，希望相关同学可以一起多多交流。</p>
<p>这是大厂前端技术体系解密系列第四篇，后续还会有其他大厂的内容，精彩还将继续，有兴趣的同学可以关注本公众号【奶爸码农】第一时间获得信息。</p>
<p><strong>推荐阅读</strong></p>
<p><a href="https://juejin.im/post/5da6bc246fb9a04e3a7f6d21" rel="" target="_blank">解密国内BAT等大厂前端技术体系-阿里篇（长文建议收藏）</a></p>
<p><a href="https://juejin.im/post/5da9db7be51d4524d0269876" rel="" target="_blank">解密国内BAT等大厂前端技术体系-百度篇（长文建议收藏）</a></p>
<p><a href="https://juejin.im/post/5db397985188250b0960824e" rel="" target="_blank">解密国内BAT等大厂前端技术体系-腾讯篇（长文建议收藏）</a></p>
<p>&nbsp;</p>
<img class="lazyload inited loaded" src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）15.png" alt="" data-src="./images/解密国内BAT等大厂前端技术体系-携程篇（长文建议收藏）15.png" data-width="258" data-height="258" />
<p>&nbsp;</p>
<p>『奶爸码农』从事互联网研发工作10+年，经历IBM、SAP、陆金所、携程等国内外IT公司，目前在美团负责餐饮相关大前端技术团队，定期分享关于大前端技术、投资理财、个人成长的思考与总结。</p>
</div>
<p><br /><br /></p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>