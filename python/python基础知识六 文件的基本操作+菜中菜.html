<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修python基础知识六 文件的基本操作+菜中菜' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>python基础知识六 文件的基本操作+菜中菜</center></div><div class='banquan'>原文出处:本文由博客园博主OnlyWang提供。<br/>
原文连接:https://www.cnblogs.com/Onlywang/p/11198673.html</div><br>
    <h2 id="基础知识六-文件操作">基础知识六 文件操作</h2>
<p>​ open():打开</p>
<p>​ file：文件的位置（路径）</p>
<p>​ mode：操作文件模式</p>
<p>​ encoding:文件编码方式</p>
<p>​ f :文件句柄</p>
<pre><code><code>f = open(&quot;1.txt&quot;,mode = &#39;r&#39;,encoding = &#39;utf-8&#39;)
print(f.read())
f.close</code></pre>
<h3 id="文件操作模式">1.文件操作模式：</h3>
<p>​ r，w，a（重要）</p>
<p>​ rb，wb，ab（次要）</p>
<p>​ r+，w+，a+</p>
<h4 id="rwa">1.1 r/w/a</h4>
<h5 id="r操作">1. r操作：</h5>
<pre><code><code>f = open(&#39;1.txt&#39;,&#39;r&#39;)
print(f.read()) #全部读取
print(f.read(5))#按照字符进行读取，前5个
print(f.readline())#读取一行内容，自动换行
print(f.readline().strip())#拖\n
print(f.readlines())#一行一行读，存为列表

#解决大文件：
for i in f:
    print(i)#本质就是一行一行进行读取</code></pre>
<h5 id="w操作">2. w操作：</h5>
<ol>
<li>先清空文件</li>
<li>写入文件</li>
</ol>
<pre><code><code>f = open(&#39;1.txt&#39;,&#39;w&#39;,encoding=&#39;utf-8&#39;)
f.write(&#39;13030308\n&#39;)
f.write(&#39;456456\n&#39;)
f.close()</code></pre>
<h5 id="a操作追加操作">3. a操作：追加操作</h5>
<pre><code><code>#在源文件的基础上进行添加
f = open(&#39;1.txt&#39;,&#39;a&#39;,encoding=&#39;utf-8&#39;)
f.write(&#39;13030308\n&#39;)
f.write(&#39;456456\n&#39;)
f.close()</code></pre>
<h4 id="b操作rbwbab">1.2. b操作:rb/wb/ab</h4>
<pre><code><code>#rb:
f1 = open(&#39;1.jpg&#39;,&#39;rb&#39;)
print(f1.read())
print(f1.read(3))#按照字节读取，读取前3个字节
#wb:
f = open(&#39;3.jpg&#39;,&#39;wb&#39;)
f.write(f1.read())
#ab:
f = open(&#39;2.jpg&#39;,&#39;ab&#39;)
f.write(&#39;你好啊&#39;,encode = &#39;utf-8&#39;)</code></pre>
<h5 id="操作">1.3 +操作</h5>
<h5 id="r读写应该先读后写">1. r+:读写。应该先读后写</h5>
<pre><code><code>#错误示范
f = open(&#39;1.txt&#39;,&#39;r+&#39;)
#f = write(&#39;cx你太美&#39;)
#print(f.read())
#正确
print(f.read())
f = write(&#39;cx你太美&#39;)</code></pre>
<h5 id="w-清空写读">2. w+ :清空写读</h5>
<pre><code><code>#读不到内容
f = open(&#39;1.txt&#39;,&#39;w+&#39;)
f = write(&#39;cx你太美&#39;)#光标问题
print(f.read())</code></pre>
<h5 id="a追加写读">3. a+:追加写读</h5>
<pre><code><code>#读不到内容
f = open(&#39;1.txt&#39;,&#39;a+&#39;)
f = write(&#39;cx你太美&#39;)#光标问题
print(f.read())</code></pre>
<h4 id="菜中菜">2.菜中菜：</h4>
<h5 id="f.tell-返回的是字节数">1.f.tell(): 返回的是字节数</h5>
<h5 id="f.seek-移动光标">2.f.seek(): 移动光标，</h5>
<ol>
<li>seek(0,0) --&gt; 移动到文件头部</li>
<li>seek(0,1) --&gt; 当前位置</li>
<li>seek(0,2) --&gt; 移动到文件末尾</li>
<li>seek(3) --&gt; 按字节移动(按照不同编码集进行计算)</li>
</ol>
<pre><code><code>print(f.tell())#显示光标位置，返回的是字节数
f.seek(0)#移动光标</code></pre>
<h5 id="文件修改">3.文件修改：</h5>
<pre><code><code>f =open(&#39;1.txt&#39;,&#39;r&#39;,&#39;utf-8&#39;)
#for i in f:
s = f.read()
s1 = s.replace(&#39;12&#39;,&#39;45&#39;)
f.close()
f1 =open(&#39;1.txt&#39;,&#39;w&#39;,&#39;utf-8&#39;)
f1.write(s1)
f1.close()   </code></pre>
<h5 id="with-open自动打开关闭文件">4.with open()#自动打开关闭文件</h5>
<pre><code><code>with open(&#39;1.txt&#39;,&#39;r&#39;,&#39;utf-8&#39;) as f,\
open(&#39;1.1.txt&#39;,&#39;w&#39;,&#39;utf-8&#39;) as f1:
    for i in f:
        s1 =i.replace(&#39;12&#39;,&#39;45&#39;)
        f1.write(s1)
import os 
os.rename(&#39;1.txt&#39;,&#39;1.bak&#39;)
os.rename(&#39;1.1.txt&#39;,&#39;1.txt&#39;)</code></pre>
<h3 id="相对路径">3.相对路径：</h3>
<ol>
<li><p>绝对路径方式打开文件</p>
<p>路径转义:</p>
<p>1.&quot;\&quot;</p>
<p>2.r&quot;C:\user\net&quot;</p></li>
</ol>
<pre><code><code>f = open(&quot;E:\\python\\oldboy\\py\\190715&quot;,&#39;r&#39;,&#39;utf-8&#39;)
#路径转义：1.&#39;\\&#39;
#2.r。--&gt;repr()：数据的原形态
#s = &quot;[1,2,&#39;3&#39;,4]&quot;
#print(s)
#print(repr(s))#--显示数据原形态
f = open(r&quot;E:\python\oldboy\py\190715&quot;,&#39;r&#39;,&#39;utf-8&#39;)
print(f.read())
f.close()</code></pre>
<ol>
<li>相对路径</li>
</ol>
<pre><code><code>f = open(&quot;../190713/1.txt&quot;,&#39;r&#39;,&#39;utf-8&#39;)
print(f.read())
f.close()
#推荐使用相对路径</code></pre>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>